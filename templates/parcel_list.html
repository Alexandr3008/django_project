{% extends 'base.html' %}
{% block title %}Мои посылки{% endblock %}
{% block content %}
    <h2>Мои посылки</h2>
    <form method="get">
        <label for="type">Фильтр по типу:</label>
        <select id="type" name="type">
            <option value="">Все</option>
            {% for type in types %}
                <option value="{{ type.id }}" {% if type_filter == type.id|stringformat:"s" %}selected{% endif %}>{{ type.name }}</option>
            {% endfor %}
        </select>
        <label for="cost_calculated">Стоимость доставки:</label>
        <select id="cost_calculated" name="cost_calculated">
            <option value="">Все</option>
            <option value="true" {% if cost_calculated == "true" %}selected{% endif %}>Рассчитана</option>
            <option value="false" {% if cost_calculated == "false" %}selected{% endif %}>Не рассчитана</option>
        </select>
        <button type="submit">Фильтровать</button>
    </form>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Название</th>
                <th>Вес (кг)</th>
                <th>Тип</th>
                <th>Стоимость (USD)</th>
                <th>Доставка (RUB)</th>
            </tr>
        </thead>
        <tbody>
            {% for parcel in parcels %}
                <tr>
                    <td><a href="{% url 'parcel_detail_web' parcel.id %}">{{ parcel.id }}</a></td>
                    <td>{{ parcel.name }}</td>
                    <td>{{ parcel.weight }}</td>
                    <td>{{ parcel.type.name }}</td>
                    <td>{{ parcel.value }}</td>
                    <td>{% if parcel.delivery_cost %}{{ parcel.delivery_cost|floatformat:2 }}{% else %}Не рассчитано{% endif %}</td>
                </tr>
            {% empty %}
                <tr><td colspan="6">Посылок нет</td></tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}